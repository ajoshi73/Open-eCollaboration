<DBScripts>
	<Script version="1">
		<Query>
			<![CDATA[
				DROP TABLE IF EXISTS `communitybase_file_archive_files`;
			]]>
		</Query>
		<Query>
			<![CDATA[
				DROP TABLE IF EXISTS `communitybase_file_archive_folders`;
			]]>
		</Query>
		<Query>
			<![CDATA[
				CREATE TABLE `communitybase_file_archive_categories` (
				  `categoryID` int(10) unsigned NOT NULL AUTO_INCREMENT,
				  `sectionID` int(10) unsigned NOT NULL,
				  `name` varchar(255) NOT NULL,
				  `autoGenerated` tinyint(1) unsigned NOT NULL,
				  PRIMARY KEY (`categoryID`),
				  KEY `FK_communitybase_file_archive_categories_1` (`sectionID`),
				  CONSTRAINT `FK_communitybase_file_archive_categories_1` FOREIGN KEY (`sectionID`) REFERENCES `communitybase_section_instances` (`sectionID`) ON DELETE CASCADE ON UPDATE CASCADE
				) ENGINE=InnoDB DEFAULT CHARSET=latin1;
			]]>
		</Query>
		<Query>
			<![CDATA[
				CREATE TABLE `communitybase_file_archive_files` (
				  `fileID` int(10) unsigned NOT NULL AUTO_INCREMENT,
				  `categoryID` int(10) unsigned NOT NULL,
				  `filename` varchar(255) NOT NULL,
				  `size` int(10) unsigned DEFAULT NULL,
				  `posted` datetime NOT NULL,
				  `poster` int(10) unsigned NOT NULL,
				  `updated` datetime DEFAULT NULL,
				  `editor` int(10) unsigned DEFAULT NULL,
				  `lockedBy` int(10) unsigned DEFAULT NULL,
				  `locked` datetime DEFAULT NULL,
				  PRIMARY KEY (`fileID`),
				  KEY `FK_communitybase_file_archive_files_1` (`categoryID`),
				  CONSTRAINT `FK_communitybase_file_archive_files_1` FOREIGN KEY (`categoryID`) REFERENCES `communitybase_file_archive_categories` (`categoryID`) ON DELETE CASCADE ON UPDATE CASCADE
				) ENGINE=InnoDB DEFAULT CHARSET=latin1;
			]]>
		</Query>
		<Query>
			<![CDATA[
				CREATE TABLE `communitybase_file_archive_file_tags` (
				  `fileID` int(10) unsigned NOT NULL,
				  `tag` varchar(255) NOT NULL,
				  PRIMARY KEY (`fileID`,`tag`),
				  CONSTRAINT `FK_communitybase_file_archive_file_tags_1` FOREIGN KEY (`fileID`) REFERENCES `communitybase_file_archive_files` (`fileID`) ON DELETE CASCADE ON UPDATE CASCADE
				) ENGINE=InnoDB DEFAULT CHARSET=latin1;
			]]>
		</Query>
	</Script>
</DBScripts>