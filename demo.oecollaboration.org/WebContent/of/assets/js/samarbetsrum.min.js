var spinnerOpts,spinner;!function(a){"use strict";a(function(){var b=!1;if(a(document).on("click",function(){}),a(document).on("click",".of-calendar .calendar-row > a",function(c){c.preventDefault();var d=a(this),e=d.closest(".calendar-row");return d.hasClass("active")?(d.removeClass("active"),void a(".calendar-day").slideUp(300)):void(!d.hasClass("disabled")&&d.hasClass("activities")&&(a(".of-calendar a").removeClass("active").ofLoading(!1),d.addClass("active").ofLoading(),a(".calendar-day").slideUp(300,function(){clearTimeout(b),a(".calendar-day").insertAfter(e).find("h2 span").text(d.find("> span").text()),b=setTimeout(function(){a(".calendar-day").slideDown(300),d.ofLoading(!1),a("body, html").animate({scrollTop:a(".calendar-day").offset().top+"px"},0)},500)})))}),a(document).on("click",".of-btn-follow",function(b){b.preventDefault();var c=a(this);c.ofLoading(),setTimeout(function(){c.toggleClass("following"),c.ofLoading(!1)},800)}),a("#create_room").length>0){var c=a(".of-inline-input");c.focus(),c.select()}a(document).on("click change","[data-of-toggler]",function(b){var c=a(this).data("of-toggler"),d=a('[data-of-toggled="'+c+'"]'),e=a(this).is('input[type="radio"]'),f=e?1===parseInt(a(this).val()):!a(this).hasClass("of-active");(e===!1||"change"===b.type)&&(e!==!0&&(b.preventDefault(),a(this).toggleClass("of-active")),d.toggleClass("of-hidden",!f),d.find("input").first().focus(),d.find("textarea").trigger("keydown"))}).on("ready",function(){var b=location.hash.replace("#",""),c=a('[data-of-toggled="'+b+'"]'),d=a('a[data-of-toggler="'+b+'"]');d.addClass("of-active"),c.removeClass("of-hidden"),c.find("input").first().focus(),c.find("textarea").trigger("keydown")}).on("click","[data-of-toggler-multiple]",function(b){b.preventDefault();var c=a(this).data("of-toggler-multiple"),d=a('[data-of-toggled-multiple="'+c+'"]');return a(this).hasClass("of-active")?!1:(a(this).addClass("of-active"),a(this).siblings("[data-of-toggler-multiple]").removeClass("of-active"),d.removeClass("of-hidden"),d.siblings("[data-of-toggled-multiple]").addClass("of-hidden"),!1)});var d=a('input[name="external"]'),e=d.attr("id"),f=a('ul[data-of-selected="'+e+'"]');a(document).on("keyup","#"+e,function(b){var c=b.keyCode?b.keyCode:b.which;if(13===c&&d.val().length>0){b.preventDefault();var e=d.val().split(","),g=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;e.reverse(),a(e).each(function(b){var c=f.find(".of-placeholder").clone().removeClass("of-placeholder"),h=g.test(e[b].trim());if(h!==!1){var i=e[b].trim();b>0&&(i+=","),d.val(d.val().replace(i,""));var j=e[b].trim();if("sebastian@osynlig.se"==j)return a.getJSON("/json/deltagare.php",{sensor:!1,id:100},function(a){c.find('u[data-of-placeholder="name"]').replaceWith(a.name),c.find("select").attr({name:"participant_"+a.id}),c.find("img").attr({src:a.image_source,alt:a.name}),f.prepend(c)}),!0;c.find("ul").empty(),c.find('u[data-of-placeholder="name"]').replaceWith(j),f.prepend(c),c.find("select").attr({name:"participant_internal[]"})}})}});var g=!1;a(document).on("click",".of-todo-list .of-checkbox-label",function(b){return a(b.target).parent().is("a")===!1?(b.stopImmediatePropagation(),!1):(window.location.href=a(b.target).parent().attr("href"),!0)}).on("change",".of-todo-list input",function(){var b=a(this),c=b.parent().parent(),d=a("<span>").addClass("completed-by").html(" <i>(Färdigställd av Fredrik Bergström 2014-05-29 kl 04:11)</i>");return c.parent().hasClass("completed")?(c.find(".completed-by").remove(),c.parent().removeClass("completed"),"undefined"!=typeof c.parent().data("completed")&&setTimeout(function(){c.appendTo(a(".of-todo-list").first())},250),!1):(c.parent().addClass("completed"),void c.find("span").append(d))}).on("click",".of-todo-list .of-checkbox",function(b){b.stopPropagation(),a(this).parent().find("input").prop("checked",!a(this).parent().find("input").prop("checked"))}).on("keyup",function(b){var c=b.keyCode?b.keyCode:b.which,d=a(".of-radio").is(":focus");if(32===c&&(a(".of-checkbox").is(":focus")||a(".of-radio").is(":focus"))){var e=a(a(".of-checkbox").is(":focus")?".of-checkbox:focus":".of-radio:focus"),f=g||e;(!d||d&&f.parent().find("input").prop("checked")!==!0)&&(f.parent().find("input").prop("checked",!f.parent().find("input").prop("checked")),f.parent().find("input").trigger("change")),g=!1}}),a(document).on("keydown",function(b){var c=b.keyCode?b.keyCode:b.which;(a(".of-checkbox").is(":focus")||a(".of-radio").is(":focus"))&&32===c&&(b.preventDefault(),g=a(a(".of-checkbox").is(":focus")?".of-checkbox:focus":".of-radio:focus"))}),a(".of-todo-list").not(".of-no-sort, .of-widget").sortable({connectWith:".of-todo-list",cancel:"aside"}),a(".of-participant-list").find("select").on("change",function(){new OF_Notification("Ny roll satt till "+a(this).find("option:selected").text())}),a(document).on("click",".of-accordion header",function(b){return b.preventDefault(),b.metaKey!==!1?(a(".of-accordion").addClass("of-closed"),void a(this).parent().removeClass("of-closed")):void a(this).parent().toggleClass("of-closed")}),a(document).on("click","a[data-file]",function(b){b.preventDefault(),a('input[data-file="'+a(this).data("file")+'"]').trigger("click")}),a("header").find("input, select, textarea").on("focus",function(){var b=a(window).scrollTop();a(".of-header").find(".active").not(a(this).parent()).removeClass("active"),a("html, body").animate({scrollTop:b},1)}),a(".close-search").on("click",function(b){b.preventDefault();var c=a(".samarbetsrum-search"),d=c.find(".of-search");return"undefined"!=typeof d.attr("style")?void d.removeAttr("style").removeClass("active"):void 0}),a(document).on("click",".show-on-focus-toggle",function(){a(".show-on-focus").show(),a(".show-on-focus-toggle").find("input").focus()});var h=!1;a(".of-searchfield, .of-search-results").on("click",function(a){a.stopPropagation()}).on("focus",function(b){b.stopPropagation(),a(this).parent().addClass("in focus")}).on("keyup",function(b){b.keyCode?b.keyCode:b.which;return a(this).parents(".of-search").length<1?!1:void(a(this).val().length>2&&(a(this).addClass("loading"),clearTimeout(h),h=setTimeout(function(){a(".of-search").addClass("has-results").find(".of-searchfield").removeClass("loading")},400)))}).parent().find("a").on("click",function(a){a.stopPropagation()}),a(document).on("click",function(){var b=a(".of-searchfield");b.parent().removeClass("focus"),b.removeClass("loading"),setTimeout(function(){b.removeClass("in")},250)}),a(".of-search-results .of-close, .of-searchfield + .of-close").on("click",function(){var b=a(this).parent().parent().find(".of-searchfield");b.parent().removeClass("focus"),b.val("").focus(),b.removeClass("loading"),setTimeout(function(){b.parent().removeClass("in has-results")},250)}),a(document).on("focus",'textarea[name="comment"]',function(){a(this).parent().parent().find(".of-post-comment").show()}),a(document).on("click","a.of-favourite",function(b){b.preventDefault();var c=a(".of-system-message-mini.success"),d=c.find("i").clone();c.find("span").html("<i>"+d.html()+"</i>Eriks samarbetsrum tillagd som favorit"),a(this).addClass("favourited"),c.fadeIn(300,function(){setTimeout(function(){c.fadeOut(300)},1500)})}).on("click",".of-btn-follow",function(b){b.preventDefault();var c=a(".of-system-message-mini.success"),d=c.find("i").clone();c.find("span").html("<i>"+d.html()+"</i>Du följer nu Eriks samarbetsrum"),c.fadeIn(300,function(){setTimeout(function(){c.fadeOut(300)},1500)}),a(".of-system-message-mini.success").fadeIn(300,function(){setTimeout(function(){a(".of-system-message-mini.success").fadeOut(300)},1500)})}),a(document).on("click","a.of-show-more",function(b){b.preventDefault(),a(this).hide(),a(this).parent().find("div.of-show-more").css("display","inline").removeClass("of-hide-to-sm").find("a.of-show-more").hide()}),a(document).on("click",'a[href="#"]',function(a){a.preventDefault()}),a(document).on("click","footer .of-block-link",function(b){if(!a(this).parent().parent().hasClass("of-notification-menu")){b.preventDefault();var c=a(this);c.ofLoading(),setTimeout(function(){c.ofLoading(!1)},3200)}}),a(document).on("click","[data-toggle]",function(b){b.stopPropagation();var c=a(".of-header"),d=a(this),e=d.attr("data-toggle"),f=a("."+e);if(d.removeAttr("data-of-badge"),f.hasClass("active"))return f.removeClass("active"),d.removeClass("active"),"of-search"===e&&f.removeAttr("style"),!1;if(c.find(".of-search").removeAttr("style"),c.find(".of-search-results").parent().removeClass("focus"),c.find(".active").not(d).removeClass("active"),f.addClass("active"),d.addClass("active"),"of-search"===e){var g=a("body").height()-a('header[role="banner"]').height(),h=a(window).scrollTop();a("html, body").animate({scrollTop:h},1);var i=a(this).parent(),j=i.find(".of-search");j.attr("style","display: block !important; height: "+g+"px;").find("input").focus()}}).on("keyup",function(b){var c=b.keyCode?b.keyCode:b.which;if(27!==c)return!1;var d=a(".of-header");d.find(".active").removeClass("active"),d.find(".of-search").removeAttr("style"),d.find(".of-search-results").parent().removeClass("focus")}),a(document).on("click",function(){a('a[data-toggle="of-notification-menu"]').removeClass("active"),a(".of-notification-menu").removeClass("active")}),a(document).on("click","[data-of-toggle-menu]",function(b){b.preventDefault();var c=a('[data-of-menu="'+a(this).attr("data-of-toggle-menu")+'"]');return c.hasClass("active")?(a(this).removeClass("active"),void c.removeClass("active")):(a(this).addClass("active"),void c.addClass("active"))}),a(".of-tabs").tabs()})}(jQuery);